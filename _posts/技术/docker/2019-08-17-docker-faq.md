---
layout: post
title: Docker技术入门与实战 - docker 简介
category: 技术
tags:  Docker
keywords: 
description: 介绍Docker常用命令
published: false
---

[Docker检查](https://docs.docker.com/docker-for-mac/)

## 为什么使用 docker

1. 更高效的利用资源。不需要硬件虚拟
2. 更快速的启动时间。直接运行于宿主机内核
3. 一致的开发环境。使用相同的镜像容器进行开发
4. 持续集成和部署。通过 dockerfile 结合 CI 自动构建部署
5. 更轻松的迁移。docker 确保执行环境一致，使得应用迁移更容易。
6. 更轻松的维护和扩展。docker 使用了分层存储和镜像技术。使得应用重复部分可以被复用。
7. 容器和虚拟机的对比总结

|特性|容器|虚拟机|
|---|---|---|
|启动时间|秒级|分钟级|
|硬盘使用|MB|GB|
|性能|接近原生|弱于原生|
|系统支撑量|单机支持上千容器|单机支持几十个虚拟机|

## 基本概念

### docker 镜像

docker 镜像是只读的，静态的。构建完成后不再改变。

分层存储，Union FS技术。

docker 镜像的文件系统实际是多层文件系统的叠加，给用户展现出来的是一个文件系统。


### docker 容器

运行态的镜像，镜像是只读的，但容器是在只读的镜像上加了可读写层。因此 docker 容器的所有变更操作都是操作的读写层。可读写层也叫存储层，而保存在该存储层的数据会随着容器的删除而消亡。

容器可以被启动，停止，暂停和删除。
容器是宿主机上的进程，但是有属于自己的命名空间。主要得益于 linux 的 controlGroup 和 namespace。因此容器可以有自己的 root 文件系统，网络配置和进程空间。

**docker 容器的最佳实践要求**

容器不向其存储层写入任何数据，容器存储层保持无状态化，所有文件的写入操作都应该使用数据卷或绑定宿主机目录。数据卷的声明周期独立于容器。对容器的删除操作不会影响数据卷存储的数据。


### docker 仓库

仓库是分发镜像的存储位置，分为本地仓库，私有仓库和公共仓库。类似于 maven 的仓库机制。本地仓库为个人主机上缓存的仓库内下载下来的部分镜像的缓存。私有仓库是公司或个人搭建的面向部分人群和公司内部的镜像服务。公共仓库是可以面向其他使用和分发的存储位置。类似于 maven 仓库的 jar 包有`groupId:artifactId:version`,docker仓库的`仓库用户名:镜像名:标签`,默认仓库为中央公共仓库，默认的标签为 latest。
